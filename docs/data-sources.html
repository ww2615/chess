<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data sources | Chess Game Analysis</title>
  <meta name="description" content="Chapter 2 Data sources | Chess Game Analysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data sources | Chess Game Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data sources | Chess Game Analysis" />
  
  
  

<meta name="author" content="Ju Hyun Jeon Freddy Wong" />


<meta name="date" content="2021-11-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-transformation.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ChessAnalysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#specific-libraries-used"><i class="fa fa-check"></i><b>1.2</b> Specific Libraries Used</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#rchess"><i class="fa fa-check"></i><b>1.2.1</b> Rchess</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#chess-game-notations"><i class="fa fa-check"></i><b>2.1</b> Chess game notations</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#image-of-the-position"><i class="fa fa-check"></i><b>2.1.1</b> Image of the position</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#sample-pgn"><i class="fa fa-check"></i><b>2.1.2</b> - Sample PGN</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-sources.html"><a href="data-sources.html#sample-fen"><i class="fa fa-check"></i><b>2.1.3</b> - Sample FEN</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#choosing-the-right-data"><i class="fa fa-check"></i><b>2.2</b> Choosing the right data</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#lichess-game-data-format"><i class="fa fa-check"></i><b>2.3</b> Lichess Game Data Format</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#missing-data"><i class="fa fa-check"></i><b>2.4</b> Missing Data</a></li>
<li class="chapter" data-level="2.5" data-path="data-sources.html"><a href="data-sources.html#moves-data"><i class="fa fa-check"></i><b>2.5</b> Moves Data</a></li>
<li class="chapter" data-level="2.6" data-path="data-sources.html"><a href="data-sources.html#data"><i class="fa fa-check"></i><b>2.6</b> 600+0 Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#understanding-the-raw-data"><i class="fa fa-check"></i><b>3.1</b> Understanding the Raw Data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#formatting-the-raw-data"><i class="fa fa-check"></i><b>3.2</b> Formatting the Raw Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#missing-values-plot"><i class="fa fa-check"></i><b>4.1</b> Missing Values Plot</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#discussion"><i class="fa fa-check"></i><b>4.2</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Chess Game Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-sources" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data sources</h1>
<div id="chess-game-notations" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Chess game notations</h2>
<p>Chess positions can be stored in one of two formats: <strong>PGN</strong>s or <strong>FEN</strong>s. PGN (Portable Game Format) is often used when people write down moves from the start of the game. PGN can also include data such as event names, players, ELO, and results. FEN (Forsyth-Edwards Notation) is a simplified shorter notation that can describe one position. FEN has the disadvantage of not being able to encode data outside of chess position such as move order, player names, ELO, and results. In this project, we will be following chess games from the start of the game thus will be using the PGN format as the base format.</p>
<p>The following encode the same chess game or chess position.</p>
<div id="image-of-the-position" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Image of the position</h3>
<div class="figure">
<img src="images/sample.PNG" alt="" />
<p class="caption">Sample Position</p>
</div>
</div>
<div id="sample-pgn" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> - Sample PGN</h3>
<p>[Event “EDAV chess tournament”]</p>
<p>[Site “Columbia University, NYC”]</p>
<p>[Date “December 1st”]</p>
<p>[Round “1”]</p>
<p>[White “student A”]</p>
<p>[Black “student B”]</p>
<p>[Result “1-0”]</p>
<ol style="list-style-type: decimal">
<li>e4 1…e5 2.Nf3 2…Nc6 1-0</li>
</ol>
</div>
<div id="sample-fen" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> - Sample FEN</h3>
<p>r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 3</p>
</div>
</div>
<div id="choosing-the-right-data" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Choosing the right data</h2>
<p>There are many online data sets that include chess PGN.
For instance, CRAN Project <a href="https://cran.r-project.org/web/packages/rchess/index.html">RChess</a> has its data set <strong>chesswc</strong> which is a collection of chess games from the FIDE World Cup 2011, 2013, and 2015.</p>
<p>However, for the purpose of our project, there were a specific set of requirements that had to be sufficed:</p>
<ol style="list-style-type: decimal">
<li><p>Sufficient <strong>amount</strong> of chess games</p></li>
<li><p><strong>Evaluation</strong> of every move</p></li>
<li><p><strong>Clock</strong> after every move</p></li>
</ol>
<p>The First requirement is relatively simple to achieve. However, very few chess data sets include computer evaluation and clock time in their PGNs. The second and third requirements are not part of the original PGN notation making it the limiting factor for our choice of data set.</p>
<p>We decided to use the data from <a href="https://database.lichess.org/">lichess database</a>. The project decided to use the October 2021 games that included 88,092,721 games played online in lichess.org. Some of the games in the database encoded evaluation and clock time after every move.</p>
</div>
<div id="lichess-game-data-format" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Lichess Game Data Format</h2>
<p><strong>lichess_db_standard_rated_2021-10.pgn</strong></p>
<p>Total 88,092,721 games.</p>
<p>The file can be downloaded from <a href="https://database.lichess.org/">database.lichess.org</a>.
The file is a list of PGNs without index.
All of the following data sets are results of organizing this data.
Not all games from the database is guaranteed to have [%clk] or [%eval] which are the clock time and the evaluation of the position. According to the Lichess database, around 6% of the games are annotated with evaluation.
The following is a sample PGN format Lichess uses.</p>
<hr />
<p>[Event “Rated Bullet game”]</p>
<p>[Site “<a href="https://lichess.org/NRafdioG" class="uri">https://lichess.org/NRafdioG</a>”]</p>
<p>[Date “2021.10.01”]</p>
<p>[Round “-”]</p>
<p>[White “xtzdavi182”]</p>
<p>[Black “al_fatih”]</p>
<p>[Result “1-0”]</p>
<p>[UTCDate “2021.10.01”]</p>
<p>[UTCTime “00:00:14”]</p>
<p>[WhiteElo “1703”]</p>
<p>[BlackElo “1698”]</p>
<p>[WhiteRatingDiff “+6”]</p>
<p>[BlackRatingDiff “-6”]</p>
<p>[ECO “B50”]</p>
<p>[Opening “Sicilian Defense: Modern Variations”]</p>
<p>[TimeControl “60+0”]</p>
<p>[Termination “Time forfeit”]</p>
<ol style="list-style-type: decimal">
<li>e4 { [%clk 0:01:00] } 1… c5 { [%clk 0:01:00] } 2. Nf3 { [%clk 0:01:00] } 2… d6 { [%clk 0:00:59] } 3. b3 { [%clk 0:01:00] } 3… Nc6 { [%clk 0:00:58] } 4. Bb2 { [%clk 0:01:00] } 4… Nf6 { [%clk 0:00:58] } 5. Bb5 { [%clk 0:00:59] } 5… Bd7 { [%clk 0:00:56] } 6. O-O { [%clk 0:00:59] } 6… a6 { [%clk 0:00:55] } 7. Bxc6 { [%clk 0:00:58] } 7… Bxc6 { [%clk 0:00:55] } 8. Re1 { [%clk 0:00:58] } 8… g6 { [%clk 0:00:55] } 9. h3 { [%clk 0:00:58] } 9… Bg7 { [%clk 0:00:54] } 10. d3 { [%clk 0:00:57] } 10… O-O { [%clk 0:00:53] } 11. Nbd2 { [%clk 0:00:57] } 11… b5 { [%clk 0:00:51] } 12. Rb1 { [%clk 0:00:57] } 12… Re8 { [%clk 0:00:51] } 13. c4 { [%clk 0:00:57] } 13… b4 { [%clk 0:00:49] } 14. a3 { [%clk 0:00:56] } 14… a5 { [%clk 0:00:47] } 15. axb4 { [%clk 0:00:55] } 15… cxb4 { [%clk 0:00:47] } 16. Ra1 { [%clk 0:00:55] } 16… Qb6 { [%clk 0:00:45] } 17. Bd4 { [%clk 0:00:53] } 17… Qc7 { [%clk 0:00:43] } 18. e5 { [%clk 0:00:51] } 18… dxe5 { [%clk 0:00:42] } 19. Nxe5 { [%clk 0:00:51] } 19… Bb7 { [%clk 0:00:39] } 20. Qc2 { [%clk 0:00:44] } 20… Rad8 { [%clk 0:00:38] } 21. Be3 { [%clk 0:00:42] } 21… Nd5 { [%clk 0:00:31] } 22. Nef3 { [%clk 0:00:40] } 22… Nxe3 { [%clk 0:00:29] } 23. Rxe3 { [%clk 0:00:40] } 23… Qd6 { [%clk 0:00:25] } 24. Rae1 { [%clk 0:00:39] } 24… e6 { [%clk 0:00:23] } 25. d4 { [%clk 0:00:38] } 25… Bxf3 { [%clk 0:00:18] } 26. Nxf3 { [%clk 0:00:37] } 26… Rc8 { [%clk 0:00:14] } 27. c5 { [%clk 0:00:34] } 27… Qd5 { [%clk 0:00:11] } 28. Rd3 { [%clk 0:00:32] } 28… Red8 { [%clk 0:00:10] } 29. Re5 { [%clk 0:00:31] } 29… Qc6 { [%clk 0:00:07] } 30. Ree3 { [%clk 0:00:29] } 30… Qb5 { [%clk 0:00:06] } 31. Qe2 { [%clk 0:00:27] } 31… Rc7 { [%clk 0:00:04] } 32. Rxe6 { [%clk 0:00:26] } 32… fxe6 { [%clk 0:00:03] } 33. Qxe6+ { [%clk 0:00:26] } 1-0</li>
</ol>
<hr />
</div>
<div id="missing-data" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Missing Data</h2>
<p><strong>data_index.csv</strong> index from <strong>1 - 9</strong></p>
<p>10,000,000 lines per csv. Total 88,092,721 lines.</p>
<p>The data_index.csv was created to understand which data was missing in the original data.
The columns of the data was constructed as following.</p>
<table>
<colgroup>
<col width="21%" />
<col width="78%" />
</colgroup>
<thead>
<tr class="header">
<th>Column Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Result</td>
<td>Result of the game (chr) ex) 1-0</td>
</tr>
<tr class="even">
<td>UTCDate</td>
<td>UTC date of the game (chr) ex) 2021.10.01</td>
</tr>
<tr class="odd">
<td>UTCTime</td>
<td>UTC time of the game (num) ex) 00:00:14</td>
</tr>
<tr class="even">
<td>WhiteElo</td>
<td>White player’s Elo in Lichess (num)</td>
</tr>
<tr class="odd">
<td>BlackElo</td>
<td>Black player’s Elo in Lichess (num)</td>
</tr>
<tr class="even">
<td>WhiteRatingDiff</td>
<td>Change in White player’s Elo after the game (num)</td>
</tr>
<tr class="odd">
<td>BlackRatingDiff</td>
<td>Change in Black player’s Elo after the game (num)</td>
</tr>
<tr class="even">
<td>ECO</td>
<td>Encyclopedia of Chess Openings. The Opening that was played in the game (chr) ex) B50</td>
</tr>
<tr class="odd">
<td>TimeControl</td>
<td>The time format in which the game was played. (chr) ex) 10 minutes + 5 second increment = “600+5”</td>
</tr>
<tr class="even">
<td>Termination</td>
<td>How the game ended (chr) ex) Normal(checkmate or resignation), Abandoned(player left the game), Time Forfeit (player ran out of time)</td>
</tr>
<tr class="odd">
<td>Evaluation</td>
<td>Whether or not the game was annotated (chr) ex) Yes, No</td>
</tr>
</tbody>
</table>
</div>
<div id="moves-data" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Moves Data</h2>
<p><strong>moves_index.csv</strong> index from <strong>1 - 93</strong></p>
<p>5,000,000 lines per csv. Total 464,436,334 lines.</p>
<p>The moves_index.csv was created to format the data move by move.
The columns of the data was constructed as following.</p>
<table>
<colgroup>
<col width="21%" />
<col width="78%" />
</colgroup>
<thead>
<tr class="header">
<th>Column Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Result</td>
<td>Result of the game (chr) ex) 1-0</td>
</tr>
<tr class="even">
<td>WhiteElo</td>
<td>White player’s Elo in Lichess (num)</td>
</tr>
<tr class="odd">
<td>BlackElo</td>
<td>Black player’s Elo in Lichess (num)</td>
</tr>
<tr class="even">
<td>ECO</td>
<td>Encyclopedia of Chess Openings. The Opening that was played in the game (chr) ex) B50</td>
</tr>
<tr class="odd">
<td>TimeControl</td>
<td>The time format in which the game was played. (chr) ex) 10 minutes + 5 second increment = “600+5”</td>
</tr>
<tr class="even">
<td>Termination</td>
<td>How the game ended (chr) ex) Normal(checkmate or resignation), Abandoned(player left the game), Time Forfeit (player ran out of time)</td>
</tr>
<tr class="odd">
<td>Color</td>
<td>The color of the player that made the move (chr) ex) w or b</td>
</tr>
<tr class="even">
<td>MoveNum</td>
<td>The number of the move (num)</td>
</tr>
<tr class="odd">
<td>Move</td>
<td>The algebraic notation of the move made (chr) ex) Qh4</td>
</tr>
<tr class="even">
<td>Type</td>
<td>One of the seven types of move: blunder, mistake, dubious, normal, interesting, good, and brilliant (chr)</td>
</tr>
<tr class="odd">
<td>Eval</td>
<td>Computer evaluation after the move (chr) ex) 0.07 or #2(mate in 2 for white)</td>
</tr>
<tr class="even">
<td>EvalDiff</td>
<td>The change in evaluation. It is 0 when the previous or current evaluation was forced mate (#number) (num)</td>
</tr>
<tr class="odd">
<td>Time</td>
<td>Time left for the player (num) ex) 0:01:50</td>
</tr>
<tr class="even">
<td>TimeSpent</td>
<td>Time spent on the move (num) ex) 0:00:02</td>
</tr>
</tbody>
</table>
</div>
<div id="data" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> 600+0 Data</h2>
<p><strong>600+0_index.csv</strong> index from <strong>1 - 16</strong>
5,000,000 lines per csv. Total 78,867,621 lines.</p>
<p>The 600+0_index.csv was created to work with a manageable size of data.
The columns of the data was identical to moves_index.csv.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ww2615/chessgame_analysis/edit/main/02-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ww2615/chessgame_analysis/blob/main/02-data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
